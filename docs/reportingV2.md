# Reporting V2

## Overview

The reporting module is responsible for generating comprehensive reports based on the risk assessment results. It produces both a detailed JSON report and a more readable HTML report, catering to different stakeholder needs.

## Key Functions

### `generate_report(risks: List[Risk], categorized_risks: Dict[str, List[Risk]], risk_interactions: List[RiskInteraction], scenario_impacts: Dict[str, List[Tuple[Risk, float]]], simulation_results: Dict[str, Dict[int, SimulationResult]], clustered_risks: Dict[int, List[int]], risk_entities: Dict[str, List[str]], sensitivity_results: Dict[str, Dict[str, float]], time_series_results: Dict[int, List[float]], scenarios: Dict[str, Scenario], advanced_analysis: Dict) -> str`

This function generates a comprehensive report in JSON format and also creates an HTML version of the report.

#### Input
- `risks`: A list of `Risk` objects.
- `categorized_risks`: A dictionary of risks categorized by their type.
- `risk_interactions`: A list of `RiskInteraction` objects.
- `scenario_impacts`: A dictionary of scenario impacts on risks.
- `simulation_results`: Results from Monte Carlo simulations.
- `clustered_risks`: Results from risk clustering analysis.
- `risk_entities`: Identified entities related to risks.
- `sensitivity_results`: Results from sensitivity analysis.
- `time_series_results`: Results from time series analysis.
- `scenarios`: A dictionary of `Scenario` objects.
- `advanced_analysis`: Results from advanced analysis techniques.

#### Output
- Returns a JSON string containing the full report.
- Saves a JSON file ('climate_risk_report.json') and an HTML file ('climate_risk_report.html') in the output directory.

### Report Structure

The generated report includes the following sections:

1. **Executive Summary**: A high-level overview of the key findings.
2. **Risk Overview**: Summary of total risks, risk categories, and high-impact risks.
3. **Risk Interactions**: Summary of risk interactions and detailed interaction data.
4. **Scenario Analysis**: Detailed analysis of risks under different scenarios.
5. **Monte Carlo Results**: Statistical results from Monte Carlo simulations.
6. **Risk Clusters**: Information on identified risk clusters.
7. **Sensitivity Analysis**: Results from sensitivity analysis across scenarios.
8. **Time Series Projection**: Projected risk impacts over time.
9. **Risk Narratives**: Narrative summaries for each risk across scenarios.
10. **Executive Insights**: High-level insights and recommendations for decision-makers.
11. **Mitigation Strategies**: Suggested strategies for mitigating identified risks.
12. **PESTEL Analysis**: Results from the PESTEL analysis.
13. **SASB Material Risks**: Risks identified as material according to SASB standards.
14. **Systemic Risks**: Analysis of systemic risks and their potential impacts.
15. **Trigger Points**: Identified trigger points that could lead to cascading effects.
16. **Resilience Assessment**: Evaluation of the company's resilience to climate risks.

### HTML Report

The HTML report provides a more readable and visually appealing version of the JSON report. It includes:

- Formatted sections for each part of the report.
- Tables for presenting structured data (e.g., Monte Carlo results, sensitivity analysis).
- Embedded visualizations (referencing the PNG files generated by the visualization module).

## Stakeholder Reports

### `generate_stakeholder_reports(main_report: Dict, company_industry: str) -> Dict[str, str]`

This function generates tailored reports for different stakeholder groups based on the main report.

#### Input
- `main_report`: The comprehensive report dictionary.
- `company_industry`: A string representing the company's industry.

#### Output
- Returns a dictionary with stakeholder types as keys and report content as values.
- Saves individual JSON files for each stakeholder report in the output directory.

### Stakeholder Report Types

1. **Board Executive Report**: Focuses on strategic implications and high-level risk overview.
2. **Investor Report**: Emphasizes financial implications and comparative industry analysis.
3. **Regulatory Report**: Details compliance status and risk assessment methodologies.
4. **Public Report**: Provides a simplified overview of the company's climate strategy and key risks.

## Usage Notes

- The reporting module relies on the output from various analysis modules, ensuring a comprehensive and integrated report.
- The JSON format allows for easy parsing and integration with other systems or dashboards.
- The HTML report is designed for human readability and can be easily shared with stakeholders who prefer a more visual representation.
- Stakeholder reports are tailored to address the specific concerns and information needs of different groups, enhancing the utility of the risk assessment results.

By providing both detailed technical reports and tailored stakeholder summaries, this reporting module ensures that the insights from the climate risk assessment are effectively communicated to all relevant parties, supporting informed decision-making at various levels of the organization.